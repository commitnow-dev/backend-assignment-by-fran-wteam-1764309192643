
# 선착순 수량 제한 쿠폰 API 서버 구현

## ✏️ 과제의 개요

| 카테고리 | 난이도 | 제한시간 |
|----------|--------|----------|
| backend | normal | 14d |

### 💻 과제에서 요구하는 개발언어

- kotlin
- spring_boot
- sql
- java


## 📜 과제의 내용

> 과제 설명과 요구사항을 참고하여, 구현해 주세요.

### 👀 과제의 설명

## 개요

온라인 커머스 사이트의 선착순 쿠폰 발급 페이지에서 사용될 주요 REST API를 구현한 서버를 개발합니다. 요구 사항 해석 능력, 도메인 모델링, 동시성 제어 방식의 타당성, API 설계, 아키텍처를 포함한 유지보수 용이성을 중심으로 평가합니다.

## 전제 사항

* 인증된 사용자(일반 사용자와 운영자)만 API를 요청한다고 전제합니다. 즉, API 서버 앞 단에서 API Gateway 혹은 Reverse Proxy 가 사용자 인증을 처리하고, 인증된 요청만 쿠폰 API 서버에 전달한다고 전제합니다. 이 때 HTTP 요청과 함게 전달 받은 다음 헤더 값을 참조해 사용자를 식별합니다.

  * 일반 사용자 ID: x-user-id
  * 운영자 ID: x-admin-id
* API 스펙이나 도메인 모델링, DB 스키마는 요구사항을 충족하는 범위에서 자유롭게 설계합니다.
* 단, 요구사항과 관련 없는 API는 구현하지 않습니다.

## 사용자 시나리오

### 행위자: 일반 사용자(User)

* 사용자는 “발급 가능한 쿠폰 목록”을 조회할 수 있다.

  * 비활성 상태거나 발급 기간이 아닌 쿠폰은 노출되지 않는다.
  * 현재 시점 기준 제공 가능한(잔여 수량 > 0) 상태의 쿠폰만 표시한다.
* 사용자는 특정 쿠폰 스킴을 선택하여 발급을 요청할 수 있다.

  * 정상 발급: 해당 사용자에게 쿠폰이 생성된다.
  * 중복 발급 요청: 이미 동일 쿠폰 스킴의 쿠폰을 발급 받은 경우, 재발급할 수 없다.
  * 수량 초과: 쿠폰 최대 수량이 모두 소진된 경우 발급이 거부된다.
* 사용자가 페이지를 재진입하거나 새로고침할 때 이미 발급받은 쿠폰은 “발급 완료 상태”로 표시된다.

### 행위자: 쿠폰 운영자(Admin)

* 운영자는 쿠폰 스킴(Scheme)을 등록할 수 있다. 스킴에는 다음 항목이 포함된다:

  * 쿠폰 이름
  * 최대 할인율
  * 할인 상한 금액
  * 쿠폰 적용 가능 최소 상품 가격
  * 쿠폰 발급 가능 기간 (시작/종료 시각)
  * 최대 발급 가능 수량
* 운영자는 쿠폰 스킴을 비활성화하여 더 이상 발급되지 않게 할 수 있다.
* 운영자는 여러 쿠폰 스킴을 동시에 운영할 수 있다.


### 🎯 과제의 요구사항

- 수많은 동시 요청을 처리할 수 있도록 Non-blocking I/O 기반으로 수평적 확장(Scale-out)이 가능한 서버 구현
- 데이터 저장소 접근 시 Reactive/Async 기반 클라이언트 사용
- 계층적 아키텍처(예. Layered, Hexagonal 등) 적용
- 자동화된 API 문서화(예. Swagger, OpenAPI Spec) 포함
- 주 저장소는 RDB(H2, MySQL, MariaDB 중 택일)를 사용하되 필요 시 다른 유형의 저장소도 추가 활용 가능
- Spring Boot 를 주 프레임워크로 사용하되 프로그래밍 언어는 Java 와 Kotlin 중 택일
- README 문서에 애플리케이션 실행 방법과 동시성 제어 전략을 요약하여 정리
